library(shiny); runApp('scripts/CS_Model_App_V3.R')
rm(list=ls())
library(shiny)
library(leaflet)
library(leaflet.extras)
library(sp)
library(sf)
library(maptools)
library(rgeos)
library(rgdal)
library(dplyr)
library(readxl)
library(googledrive)
library(data.table)
library(raster)
library(DT)
Background_path="G:/Layers/Geohydrology"
Prodact_path=paste0(Background_path,"/Geohydrology/Apps/CS_Model_V01/Products")
# Get Base Layers ==============================================================================
# Local Path -----------------------------------------------------------------------------------
proj4string="++proj=tmerc +lat_0=31.73439361111111 +lon_0=35.20451694444445 +k=1.0000067 +x_0=219529.584 +y_0=626907.39 +ellps=GRS80 +units=m +no_defs" # set it to UTM
# Get Web Layers -------------------------------------------------------------------------------
drive_auth(email = "yoniizhak@gmail.com")
# Get Web Layers -------------------------------------------------------------------------------
googledrive::drive_auth(email = "yoniizhak@gmail.com")
# Wells ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
CS_wells_loc="https://drive.google.com/file/d/1c7cY3BwM-LdznHfZB6ynNKXvwG6mUniu/view?usp=sharing"
CS_wells_pth="1c7cY3BwM-LdznHfZB6ynNKXvwG6mUniu"
temp <- tempfile(fileext = ".zip")
dl <- drive_download(
as_id(CS_wells_pth), path = temp, overwrite = TRUE)
out <- unzip(temp, exdir = tempdir())
CS_wells_xy=sf::as_Spatial(st_read(out[6]))
# Faluts ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
transforms_loc="https://drive.google.com/file/d/1xo0jgZuSEM85oMus5mVptZxrfTiC10sd/view?usp=sharing"
transforms_pth="1xo0jgZuSEM85oMus5mVptZxrfTiC10sd"
temp <- tempfile(fileext = ".zip")
dl <- googledrive::drive_download(
as_id(transforms_pth), path = temp, overwrite = TRUE)
out <- unzip(temp, exdir = tempdir())
transforms_shp <- readOGR(out[6])
# Set Base Lyers ===============================================================================
# Wells Geology Description
CS_wells_ll = spTransform(CS_wells_xy, CRS("+proj=longlat +datum=WGS84"))
CS_wells=data.frame(Longitude=CS_wells_ll@coords[,1],Latitude=CS_wells_ll@coords[,2],name=CS_wells_ll$name,LEVEL_DES=CS_wells_ll$LEVEL_DES)
CS_wells_coordinates=SpatialPointsDataFrame(CS_wells[,c("Longitude","Latitude")],CS_wells)
# Create a palette that maps factor levels to colors
pal <- colorFactor(c("blue","navy","green","sienna","red","red4"),
domain = c("Full_Description", "Stratigraphic_Formations","Stratigraphic_Groups","Lithology","No_Description","Partly_Log_Description"))
# TJ Faluts
transforms_ll = spTransform(transforms_shp, CRS("+proj=longlat +datum=WGS84"))
transforms_polygon <- gBuffer(transforms_ll, width=0.001, byid=F)
crs(transforms_polygon) <- sp::CRS("+proj=longlat +datum=WGS84")
# Geology -Base map
basemap_pth=paste(Background_path,"Geohydrology/Apps/CS_Model_V01/www/geo_uni_clip_V2.tif",sep = "/")
basemap_rs <- brick(basemap_pth)
basemap_pth=paste0("data/Background_layers/Geology_Maps","/geo_uni_clip_V2.tif")
basemap_pth
basemap_rs <- brick(basemap_pth)
basemap_rs <- raster::brick(basemap_pth)
crs(basemap_rs) <- sp::CRS(proj4string)
basemap_rgb=mapview::viewRGB(basemap_rs,
r = 1, g = 2, b = 3,
maxpixels = 5*10^1,
layer.name="Geology")
basemap_rgb=mapview::viewRGB(basemap_rs,
r = 1, g = 2, b = 3,
maxpixels = 5*10^6,
layer.name="Geology")
runApp('scripts/CS_Model_App_V3.R')
runApp('scripts/CS_Model_App_V3.R')
basemap_pth=paste0("data/Background_layers/Geology_Maps","/geo_uni_clip_V2.tif")
basemap_rs <- raster::brick(basemap_pth)
crs(basemap_rs) <- sp::CRS(proj4string)
basemap_rgb=mapview::viewRGB(basemap_rs,
r = 1, g = 2, b = 3,
maxpixels = 5*10^1,
layer.name="Geology")
getwd()
runApp('scripts/CS_Model_App_V3.R')
runApp('scripts/CS_Model_App_V3.R')
library(shiny); runApp('CS_Model_App_V3.R')
print(getwd())
